<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>丟小人</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #eef6ff;
        user-select: none;
    }

    #person {
        position: absolute;
        width: 120px;
        cursor: grab;
    }

    #person:active {
        cursor: grabbing;
    }
</style>
</head>
<body>

<!-- 小人 -->
<svg id="person" viewBox="0 0 160 260">
    <circle cx="80" cy="45" r="35" fill="#ffe6c9"/>
    <circle cx="68" cy="42" r="4"/>
    <circle cx="92" cy="42" r="4"/>
    <path d="M65 58 Q80 68 95 58" stroke="#000" stroke-width="3" fill="none"/>
    <rect x="50" y="85" width="60" height="90" rx="20" fill="#6fa8dc"/>
</svg>

<script>
const person = document.getElementById("person");

// 位置
let x = window.innerWidth / 2;
let y = window.innerHeight / 2;

// 速度
let vx = 0;
let vy = 0;

// 拖曳
let dragging = false;
let lastX = 0;
let lastY = 0;

// 初始位置
person.style.left = x + "px";
person.style.top = y + "px";

// 按下抓住
person.addEventListener("mousedown", e => {
    dragging = true;
    vx = 0;
    vy = 0;
    lastX = e.clientX;
    lastY = e.clientY;
});

// 拖動
document.addEventListener("mousemove", e => {
    if (!dragging) return;

    const dx = e.clientX - lastX;
    const dy = e.clientY - lastY;

    x += dx;
    y += dy;

    // 記錄丟出的速度
    vx = dx;
    vy = dy;

    lastX = e.clientX;
    lastY = e.clientY;

    person.style.left = x + "px";
    person.style.top = y + "px";
});

// 放開 → 丟出去
document.addEventListener("mouseup", () => {
    dragging = false;
});

// 物理更新
function update() {
    const w = person.offsetWidth;
    const h = person.offsetHeight;

    if (!dragging) {
        x += vx;
        y += vy;

        // 摩擦
        vx *= 0.98;
        vy *= 0.98;

        // 撞牆反彈（不會卡牆）
        if (x < 0) {
            x = 0;
            vx = Math.abs(vx);
        }
        if (x > window.innerWidth - w) {
            x = window.innerWidth - w;
            vx = -Math.abs(vx);
        }
        if (y < 0) {
            y = 0;
            vy = Math.abs(vy);
        }
        if (y > window.innerHeight - h) {
            y = window.innerHeight - h;
            vy = -Math.abs(vy);
        }

        person.style.left = x + "px";
        person.style.top = y + "px";
    }

    requestAnimationFrame(update);
}

update();
</script>

</body>
</html>

</body>
</html>
