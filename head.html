<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>æŠŠå°äººä¸Ÿä¾†ä¸Ÿå»</title>
<style>
  body {
    text-align: center;
    background: #f0f0f0;
    font-family: Arial;
  }
  canvas {
    background: white;
    border: 2px solid black;
    cursor: grab;
  }
  button {
    margin-top: 10px;
    padding: 8px 16px;
    font-size: 16px;
  }
</style>
</head>
<body>

<h2>ğŸ§â€â™‚ï¸ æŠŠå°äººä¸Ÿä¾†ä¸Ÿå»</h2>
<canvas id="game" width="600" height="400"></canvas><br>
<button onclick="reset()">å›åˆ°ä¸­å¤®</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let guy = {
  x: 300,
  y: 200,
  r: 20,
  vx: 0,
  vy: 0,
  dragging: false
};

const gravity = 0.5;
const bounce = 0.8;

let lastMouse = { x: 0, y: 0 };

canvas.addEventListener("mousedown", e => {
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  const dx = mx - guy.x;
  const dy = my - guy.y;

  if (Math.sqrt(dx * dx + dy * dy) < guy.r) {
    guy.dragging = true;
    guy.vx = 0;
    guy.vy = 0;
    lastMouse.x = mx;
    lastMouse.y = my;
  }
});

canvas.addEventListener("mousemove", e => {
  if (!guy.dragging) return;

  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  guy.vx = mx - lastMouse.x;
  guy.vy = my - lastMouse.y;

  guy.x = mx;
  guy.y = my;

  lastMouse.x = mx;
  lastMouse.y = my;
});

canvas.addEventListener("mouseup", () => {
  guy.dragging = false;
});

function reset() {
  guy.x = 300;
  guy.y = 200;
  guy.vx = 0;
  guy.vy = 0;
}

function update() {
  if (!guy.dragging) {
    guy.vy += gravity;
    guy.x += guy.vx;
    guy.y += guy.vy;

    // ç‰†å£åå½ˆ
    if (guy.x < guy.r) {
      guy.x = guy.r;
      guy.vx *= -bounce;
    }
    if (guy.x > canvas.width - guy.r) {
      guy.x = canvas.width - guy.r;
      guy.vx *= -bounce;
    }
    if (guy.y < guy.r) {
      guy.y = guy.r;
      guy.vy *= -bounce;
    }
    if (guy.y > canvas.height - guy.r) {
      guy.y = canvas.height - guy.r;
      guy.vy *= -bounce;
    }
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // å°äººï¼ˆåœ“å½¢ï¼‰
  ctx.beginPath();
  ctx.arc(guy.x, guy.y, guy.r, 0, Math.PI * 2);
  ctx.fillStyle = "orange";
  ctx.fill();
  ctx.stroke();

  // è‡‰
  ctx.fillStyle = "black";
  ctx.fillRect(guy.x - 5, guy.y - 5, 3, 3);
  ctx.fillRect(guy.x + 2, guy.y - 5, 3, 3);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
